---
title: "Elsevier Hybrid Open Access Analysis"
description: Publishers rarely make invoicing of publication fess for hybrid open access articles transparent. Elsevier is an remarkable exception, because the publisher provides machine-readable data about central agreements with funding bodies and fee waivers at the article level. This blogpost demonstrates how to mine these data from Elsevier full-texts with R. Analysing the resulting dataset of 70,000 hybrid open access articles published in around 1,800 journals between 2015 and now reveals that around one third of publication fees were paid through central agreements. Nevertheless, the majority of funding sources for hybrid open access articles remains unknown, raising important questions about the transparency of fee-based open access publishing.
date: Aug 29, 2019
author:
  - name: Najko Jahn 
    url: https://twitter.com/najkoja
    affiliation: State and University Library Göttingen
    affiliation_url: https://www.sub.uni-goettingen.de/
output: distill::distill_article
bibliography: literature.bib
#always_allow_html: true
---

```{r, echo = FALSE, message = FALSE, warning = FALSE}
knitr::opts_chunk$set(
  comment = "#>",
  collapse = TRUE,
  warning = FALSE,
  message = FALSE,
  echo = FALSE
)
options(scipen = 999, digits = 2)
knitr::knit_hooks$set(
  inline = function(x) {
    if (is.numeric(x)) {
      return(prettyNum(x, big.mark = ","))
    } else{
      return(x)
    }
  }
)
library(tidyverse)
```

In September 2018, the [cOAltion S](https://www.coalition-s.org/), a group of international research funders, announced its widely discussed [Plan S](https://www.coalition-s.org/principles-and-implementation/). According to its principles, publication fees that may arise when publishing open access, also known as article-processing charges (APC), should be covered by funders or research organizations directly. In the case of hybrid open access, the funders want to financially support publication fees just through transformative agreements, which are central invoicing agreements aiming at the transition of subscription-based journal publishing to fully open access.

Although surveys[@Solomon_2011; @soap] suggest that already many authors do not pay publication fees themselves, keeping track of these funding streams is challenging, because publishers rarely share invoice data. But also not all funders and research organizations report open access payments to crowd-sourcing initiatives like [Open APC](https://github.com/OpenAPC/openapc-de). Furthermore, transformative agreements  introduce new requirements [@Geschuhn_2017]. Altogether, this leads to an intransparent situation that limits the monitoring of hybrid open access in general and agreements between publishers and funding bodies in particular.   <!--, despite existing attempts to crowd-source such data[@Jahn_2016]. Prominent examples sharing details about publication fee spending openly are the British [Charity Open Access Fund
](https://wellcome.ac.uk/funding/guidance/charity-open-access-fund) maintained by the Wellcome Trust or the [Open APC Initiative](https://github.com/OpenAPC/openapc-de). --> 

At the SUB Göttingen, we will address this complex situation in a new project funded by the [Deutsche Forschungsgemeinschaft (DFG)](https://gepris.dfg.de/gepris/projekt/416115939). Building on our pilot, the interactive [Shiny](https://shiny.rstudio.com/) app [Hybrid OA Journal Monitor](https://subugoe.shinyapps.io/hybridoa/), this project will investigate data needs from German library consortia and how they can be answered by metadata requirements in transformative agreements. Using open data, case-studies and data products will be developed to monitor levels of compliance with policy recommendations. Here, invoice data are essential to make the various funding streams for hybrid open access articles visible. 

Against this background, this blogpost presents a dataset comprising publicly available invoice data for hybrid open access articles from Elsevier, a major publisher of scholarly journals. This dataset brings together metadata from Crossref and information retrieved from open access full-texts. The methods used to obtain the data not only address key challenges to discover hybrid open access articles along with funding and affiliation information using open data and tools. Elsevier's effort to make invoice recipients openly available also serves as a good practice example for other publishers offering hybrid open access options and central agreements. 

To demonstrate the potential of publisher-provided data for the monitoring of the transition of journals to open access, the dataset will be used to analyse the number and the proportion of hybrid open access articles in Elsevier journals. Drawing on Elsevier's funding information, I will also investigate whether Elsevier sent invoices to authors or to funders that made an [agreement with Elsevier](https://www.elsevier.com/about/open-science/open-access/agreements), or if the fees were waived. Moreover, text-mined author email domains will provide a rough approximation of the affiliation of the first resp. corresponding author, an important data point for delineating open access funding.

The resulting dataset is openly available on GitHub along with the source code.

<!--## Local background

The local background of this work is the [Hybrid Open Access Journal Monitor](https://subugoe.github.io/hybrid_oa_dashboard/about.html), an interactive analytical application piloted at the SUB Göttingen. The library received [funding from the German Research Foundation](https://gepris.dfg.de/gepris/projekt/416115939?language=en), to build on this work during the next two years. 

This project will inform metadata guidelines around transformative agreements. Based on standardized and open data, the DFG funding will also allow for extending the pilot dashboard. The aim is to develop analytical applications for library consortia, allowing them to keep track of hybrid open access uptake levels for pre-defined journal packages. Here, invoice data are crucial to make the various funding streams for hybrid open access articles visible.-->

## Methods

As a start, I used the [Elsevier publication fee price list](https://www.elsevier.com/__data/promis_misc/j.custom97.pdf), an openly available pdf document, to determine hybrid open access journals in Elsevier's journal portfolio. The rOpenSci [tabulizer](https://github.com/ropensci/tabulizer) package [@tabulizer] allowed to extract data about these journals from this file. 

<aside>
  See [fetch_apc_list.R](https://github.com/njahn82/elsevier_hybrid_volume/blob/master/R/fetch_apc_list.R) how to obtain journal data 
</aside>

Then, I followed the approach of the [Hybrid OA Journal Monitor](https://subugoe.github.io/hybrid_oa_dashboard/about.html) and interfaced the Crossref REST API with the R package [rcrossref](https://docs.ropensci.org/rcrossref/) [@rcrossref]. The first API call retrieved facet field counts for license URLs and the yearly article volumes for the period 2015-19 for every journal. After matching license URLs indicating open access articles, a second API call checked license metadata per journal. Here, I used the Crossref’s REST API filters `license.url` and  `license.delay` to exclude delayed open access articles. For every immediate open access article, I downloaded metadata including full-text links from Crossref.

<aside>
  See [fetch_cr_md.R](https://github.com/njahn82/elsevier_hybrid_volume/blob/master/R/fetch_cr_md.R) how Crossref was called with R 
</aside>

Elsevier provides access to full-texts as `html` and `xml` document via the [Crossref Text and Data Mining Services (Crossref-TDM)](https://support.crossref.org/hc/en-us/articles/215750183-Crossref-Text-and-Data-Mining-Services). Surprisingly, the `xml` representation not only contains the full-text, but also embedded metadata including information about open access sponsorship in the `<core>` node: 

```xml
<openaccess>1</openaccess>
<openaccessArticle>true</openaccessArticle>
<openaccessType>Full</openaccessType>
<openArchiveArticle>false</openArchiveArticle>
<openaccessSponsorName>
  BMBF - German Federal Ministry of Education and Research
</openaccessSponsorName>
<openaccessSponsorType>FundingBody</openaccessSponsorType>
<openaccessUserLicense>
  http://creativecommons.org/licenses/by/4.0/
</openaccessUserLicense>
```
 
*Snapshot of open access metadata in Elsevier XML full-texts. <https://api.elsevier.com/content/article/PII:S0169409X18301479?httpAccept=text/xml>*

After downloading the Elsevier full-texts with the [crminer](https://docs.ropensci.org/crminer/) package[@crminer], I extracted the above-highlighted open access informatiom from the `xml` documents. 

<aside>
  See [R/tdm_oa_info.R](https://github.com/njahn82/elsevier_hybrid_volume/blob/master/R/tdm_oa_info.R)
</aside>

Moreover, I parsed the first author email address, assuming that email domains roughly indicate the affiliation of the first respective corresponding author at the time of publication. The package [urltools](https://CRAN.R-project.org/package=urltools) [@urltools] enabled to extract email domains and to split them in meaningful parts. 


<aside>
  See [R/extract_email_domains.R](https://github.com/njahn82/elsevier_hybrid_volume/blob/master/R/extract_email_domains.R)
</aside>

## Dataset characteristics

In the following data analysis, I will be using two files. The first file, [`journal_facets.json`](data/journal_facets.json), contains the number of publications per Elsevier journal that offers hybrid open access options and year. It furthermore provides the various license URLs found through Crossref.

The second file, [`elsevier_hybrid_oa_df.csv`](data/elsevier_hybrid_oa_df.csv), comprises article-level data. Each row holds information for a single hybrid open access article, and the columns represent:

|Variable        |Description                                                                                                                      |
|:---------------|:--------------------------------------------------------------------------------------------------------------------------------|
|`doi`             |DOI                                                                                                                              |
|`license`         |Open Content License                                                                                                             |
|`issued`          |Earliest publication date                                                                                                        |
|`issued_year`     |Earliest publication year                                                                                                        |
|`issn`            |ISSN, a journal identifier                                                                                                       |
|`journal_title`   |The title of the journal                                                                                                         |
|`journal_volume`  |Yearly publication volume                                                                                                        |
|`tdm_link`        |Link to the XML full-text                                                                                                            |
|`oa_sponsor_type` |Invoice recipient type                                                                                                           |
|`oa_sponsor_name` |Institution that directly received an invoice                                                                                    |
|`oa_archive`      |Was open access provided through Elsevier's open archive programme, in which articles are made openly available after an embargo? |
|`host`            |Email host, e.g. `med.cornell.edu`                                                                                                 |
|`tld`             |Top-level domain, e.g. `edu`                                                                                                       |
|`suffix`          |Extracted suffix from domain name as defined by the public suffix list, e.g. `ac.uk`                                                          |
|`domain`          |Email domain, e.g. `cornell.edu`                                                                                                   |
|`subdomain`       |Email subdomain, e.g. `med` |                                                                      


It must be noted, however, that Elsevier did not provide an official documentation of its open access and invoice data at the time of writing this blogpost. 

## Results

```{r}
library(tidyverse)
library(jsonlite)
library(ggeconodist)
hybrid_df <- readr::read_csv("data/elsevier_hybrid_oa_df.csv")
cr_facets <- jsonlite::stream_in(file("data/journal_facets.json"), verbose = FALSE)
```

In total, `r length(unique(hybrid_df$issn))` out of `r length(unique(cr_facets$journal_title))` Elsevier journals with an open access option published at least one open access article between 2015 and now, corresponding to about `r round(length(unique(hybrid_df$issn)) / length(unique(cr_facets$journal_title)) * 100, 2)` %. In these journals `r nrow(hybrid_df)` hybrid open access articles appeared. The total share of hybrid open access in the publication volume of Elsevier journals was `r round(nrow(hybrid_df) / cr_facets %>% unnest(year_published) %>% filter(.id > 2014) %>% .$V1 %>% sum() * 100, 2)` %.

### What is the uptake of hybrid open access among Elsevier journals?

```{r}
all_per_year <- cr_facets %>%
  unnest(year_published) %>%
  rename(year = .id, article_volume = V1) %>%
  filter(year > 2014)

oa_per_year <- hybrid_df %>%
  mutate(issued_year = as.character(issued_year)) %>%
  group_by(issn, issued_year) %>%
  summarise(n = n()) %>%
  right_join(all_per_year, by = c("issn", "issued_year" = "year")) %>%
  mutate(n = ifelse(is.na(n), 0, n)) %>%
  mutate(oa_share = n / article_volume)

perc_df <- oa_per_year %>%
  filter(n != 0) %>%
 group_by(issued_year) %>% 
  summarize(median = median(oa_share),
            p_10 = quantile(oa_share, 0.1),
            p_90 = quantile(oa_share, 0.9)) %>%
  ungroup()
```

The hybrid open access share varied across Elsevier journals. Figure \@ref(fig:uptake), which replicates a boxplot aesthetics from The Economist magazine using the ggeconodist package [@econodist], shows a slow, but steady hybrid open access uptake. The median open access proportion was around `r perc_df %>% filter(issued_year == "2019") %>% .$median %>% round(2) * 100`% in the first eleven months in 2019. 

```{r uptake, echo = FALSE, fig.cap = "Hybrid open access uptake in Elsevier journals per year in percent, visualized as diminutive distribution chart. Since 2015, most journals have had a slow uptake rate of hybrid open access. In general, the hybrid open access publishing model played a marginal role compared to Elsevier's total publication volume. Data Source: Elsevier B.V / Crossref."}
a_plot <- perc_df %>%
  ggplot()+
  geom_econodist(aes(x = issued_year, ymin = p_10, median = median, ymax = p_90),
         stat = "identity", show.legend = TRUE) +
  scale_y_continuous(position = "right", limits = range(0, 0.10),
                    labels =  scales::percent) +  coord_flip() +
  labs(
    x = NULL, y = NULL
   # title = "What is the uptake of hybrid open access among Elsevier journals?",
  #  subtitle = "Proportion of immediate open access articles published in subscription-based journals\nJan 2015 to July 2019",
   # caption = "Data source: Elsevier B.V. / Crossref"
  ) +
  theme_minimal(base_family = "Roboto") +
  theme(panel.grid.minor = element_blank()) +
  theme(axis.ticks = element_blank()) +
  theme(panel.grid.major.y = element_blank()) +
  theme(panel.border = element_blank())
grid.newpage()
left_align(a_plot, c("subtitle", "title", "caption")) %>% 
  add_econodist_legend(econodist_legend_grob(family = "Roboto"), below = "subtitle") %>% 
  grid.draw()  
```


### How many hybrid open access articles were facilitated by central agreements with Elsevier?

In most cases, Elsevier sent invoices for hybrid open access publication fees to individual authors (`r round(hybrid_df %>% filter(oa_sponsor_type == "Author") %>% nrow() / nrow(hybrid_df) * 100, 2)` %). For around `r round(hybrid_df %>% filter(oa_sponsor_type == "FundingBody") %>% nrow() / nrow(hybrid_df) * 100, 2)` % of articles, institutions and funding bodies with an central invoicing agreement paid the publication fee directly for affiliated authors. Elsevier granted publication fee waivers to `r round(hybrid_df %>% filter(oa_sponsor_type == "ElsevierWaived") %>% nrow() / nrow(hybrid_df) * 100, 2)` % of hybrid open access articles.

Figure \@ref(fig:invoiceoverview) shows the annual development per invocing type. Inspired by Claus O. Wilke’s "Fundamentals of Data Visualization" [@wilke], each type is visualised separately as parts of the total. The figure reveals a general growth of hybrid open access articles. It illustrate that this development was mainly driven by individual options to pay for hybrid open access publication fees, while central invoicing stagnated. Also the amount of fee-waived articles remained more or less constant during 2015 and now.

```{r invoiceoverview, fig.cap="Development of fee-based hybrid open access publishing in Elsevier journals by invoicing type. Colored bars represent the invoice recipient, or if the fee was waived. Grey bars show the total number of hybrid open access articles published by Elsevier journals between 2015 and now. Data Source: Elsevier B.V / Crossref."}
sponsored_articles <- hybrid_df %>%
  mutate(oa_sponsor_type = ifelse(is.na(oa_sponsor_type), "unknown", oa_sponsor_type)) %>%
  mutate(oa_sponsor_type = recode(oa_sponsor_type, 
                                  `FundingBody` = "Agreement",
                                  `ElsevierWaived` = "Fee Waived")) %>%
  mutate(fct_source = fct_infreq(oa_sponsor_type)) %>%
  mutate(fct_source = fct_lump(fct_source, prop = 0.05)) %>%
  count(issued_year, fct_source)
all_articles <- hybrid_df %>%
  group_by(issued_year) %>%
  summarise(n = n())

ggplot(sponsored_articles, aes(x = gsub("20", "", issued_year), y = n)) +
  geom_bar(
    data = all_articles,
    aes(fill = "All hybrid open access articles"),
    color = "transparent",
    stat = "identity"
  ) +
  geom_bar(aes(fill = "by invoicing type"), color = "transparent", stat = "identity") +
  facet_wrap( ~ fct_source, nrow = 1) +
  scale_fill_manual(values = c("#b3b3b3a0", "#56B4E9"), name = "") +
  labs(x = NULL, y = NULL) + 
       #title = "Elsevier Hybrid Open Access:\nTo whom did the publisher send the bill?",
      # caption = "Data source: Elsevier B.V. / Crossref") +
  scale_y_continuous(labels = scales::number_format(big.mark = " ")) +
  theme_minimal(base_family="Roboto", base_size = 12) +
  theme(panel.grid.minor=element_blank()) +
  theme(axis.ticks=element_blank()) +
  theme(panel.grid.major.x=element_blank()) +
  theme(panel.border=element_blank()) +
  theme(legend.position="top", legend.justification = "right")
```


The following interactive visualization created with the [echarts4r](https://echarts4r.john-coene.com/) package[@echarts] let you browse the invoicing data (\@ref(fig:treefunder)).

```{r treefunder, fig.cap="Breakdown of Elsevier hybrid open access journal articles by invoice recipient. Each rectangle represents an invoicing type and can be broken down by recipient. Data Source: Elsevier B.V."}
library(echarts4r)
hybrid_df %>% 
  mutate(oa_sponsor_type = recode(oa_sponsor_type, 
                                  `FundingBody` = "Agreement",
                                  `ElsevierWaived` = "Fee Waived")) %>%
  replace_na(list(oa_sponsor_name = "unknown", oa_sponsor_type = "unknown")) %>%
  count(oa_sponsor_name, oa_sponsor_type) %>%
    e_charts() %>%
    e_treemap(oa_sponsor_type, oa_sponsor_name, n, leafDepth = "1",
              name = "APC Source") %>%
    e_tooltip(trigger = "item") %>%
    e_title("Elsevier Hybrid Open Access: Invoice Recipients")
```

Clicking on "Agreement" shows the funders and library consortia that covered hybrid open access publication fees directly. In total, Elsevier disclosed `r hybrid_df %>% distinct(oa_sponsor_name) %>% filter(!is.na(oa_sponsor_name)) %>% nrow()` different funding bodies that received an invoice for open access publication. Not surprinsingly, mostly British and Dutch funders or consortia paid for hybrid open access in Elsevier journals. But also the German Federal Ministry of Education and Research (BMBF) is well represented despite the current boycott from most universities and research organizations in Germany [@Else_2018]. In fact, the BMBF is not part of the [Alliance of Science Organisations in Germany](https://www.dfg.de/en/dfg_profile/alliance/index.html), which is behind the boycott. Since 2018, the BMBF has financially supported `r hybrid_df %>% filter(grepl("BMBF", oa_sponsor_name)) %>% nrow()` hybrid open access articles that appeared in `r hybrid_df %>% filter(grepl("BMBF", oa_sponsor_name)) %>% distinct(issn) %>% nrow()` Elsevier journals according to the publisher.

### Who published hybrid open access in Elsevier journals?

In addition to funding information, email domains were parsed from Elsevier full-texts. These domains roughly indicate the affiliation of the first or of the corresponding authors, respectively, a data point used to delineate open access funding. 

```{r emaildomain, fig.cap="Email domain analysis of first resp. corresponding authors publishing hybrid open access in Elsevier journals. Around every fourth article published between 2015 and now was from an author affiliated with an UK-based academic institution. Data Source: Elsevier B.V."}
email_df <- hybrid_df %>%
  filter(!is.na(suffix)) %>%
  mutate(suffix = fct_lump(suffix, prop = 0.03, other_level = "other")) %>%
  count(suffix, sort = TRUE) %>%
  mutate(prop = n / sum(n)) %>%
  mutate(suffix = fct_inorder(suffix)) %>%
  mutate(suffix = fct_rev(suffix)) %>%
  mutate(suffix = fct_relevel(suffix, "other")) 
ggplot(email_df, aes(suffix, prop)) +
  geom_bar(stat = "identity", fill = c(rep("grey60", 7), "#56B4E9")) +
  geom_text(aes(label = paste0(round(prop*100, 1), "%")),
             color="white", hjust=1.1) +
  coord_flip() +
  scale_y_continuous(NULL, labels = scales::percent_format(accuracy = 5L)) +
  labs(x = "Author Domain", y = "Hybrid Open Access Article Share") +
  theme_minimal(base_family="Roboto", base_size = 12) +
  theme(plot.margin=margin(30,30,30,30)) +
  theme(panel.grid.minor=element_blank()) +
  theme(axis.ticks=element_blank()) +
  theme(panel.grid.major.y=element_blank()) +
  theme(panel.border=element_blank())
```

Figure \@ref(fig:emaildomain) presents a breakdown by email domain suffix. In total, `r hybrid_df %>% filter(!is.na(suffix)) %>% nrow()` email addresses were retrieved and parsed from Elsevier full-texts, corresponding to an share of `r round(hybrid_df %>% filter(!is.na(suffix)) %>% nrow() / nrow(hybrid_df) * 100, 2)` %. Most corresponding author emails originate from academic institutions in the UK ("ac.uk"), followed by domains from commercial organizations ("com"), and US-American institutions of higher education ("edu"). The figure illustrates that European institutions from  Germany ("de"), the Netherlands ("nl"), and Sweden ("se") were well represented. In total, `r hybrid_df %>% filter(!is.na(suffix)) %>% distinct(suffix) %>% nrow()`  domain suffixes were retrieved.

In the following, a hierarchical, interactive treemap visualizes the distribution of the email domains (see Figure \@ref(fig:emailsub)). While it appears that the distribution of email domains roughly represent the research landscape measured by publications, the dominance of domains from commercial organizations, mostly email providers like "gmail.com" or the Chinese "163.com" and "126.com" highlights the limitations of this approach to identify eligble funding institutions from email adresses.


```{r emailsub, fig.cap="Email domain analysis of first resp. corresponding authors publishing hybrid open access in Elsevier journals. Each top-level domain can be subdivided further into domain names representing academic institutions or companies. Data Source: Elsevier B.V."}
library(echarts4r)
hybrid_df %>% 
  mutate(domain = ifelse(!is.na(domain), paste(domain, suffix, sep ="."), NA)) %>%
  replace_na(list(suffix = "unknown", domain = "unknown")) %>%
  count(suffix, domain) %>%
    e_charts() %>%
    e_treemap(suffix, domain, n, leafDepth = "1",
              name = "Email Domain") %>%
    e_tooltip(trigger = "item") %>%
    e_title("Email Domains from First / Corresponding Author
")

```

### 

## Discussion and conclusion

<!-- open data sets and methods, helpful for research about the open acces but, but alos valuable for its implementation, for instance to prepar enoegoitons between publsihers and libraires
- value of rich metadata provided by publisher to complement the existing evidence base, mostly driven funders and lirbaries
- shows that it is not a technolgical problem, but many services as well as data analytics tools are already in place (crossref, tdm) 
- more practical, although mostly paid to .., growing importance of aggrements making open access funding more transparent
- however, mostly unknown-->
